<!DOCTYPE html>
<html>

    <head>
        <!-- Set the character set and the title of the document -->
        <meta charset="utf-8">
        <title>Ex</title>

        <!-- Include Bootstrap CSS from a CDN for styling -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous">

        <!-- Include Bootstrap Icons CSS from a CDN for icon support -->
        <link rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

        <!-- Include custom styling from a local CSS file -->
        <link rel="stylesheet" href="css/styling.css">

        <!-- Include JavaScript files for the application logic -->
        <script src="js/FotoPrint_manager.js"></script>
        <script src="js/FotoPrint.js"></script>
        <script src="js/DrawingObjects.js"></script>

        <style>
#progressBar { border:1px solid #aaa; color:#fff; width:292px; height: 20px; }
#played { background-color:#aaa; height:20px; display:inline-block; }
</style>

    </head>

    <body>
        <!-- VIDEO -->
        <head>
            <script src="js/VideoPlayer_manager1.js"></script>
        </head>
        <div>
            <header>
                <h1>Video Player</h1>
            </header>
            <section id="playerVideo">
                <video>
                    <source src="video/13_MissionImpossible_KyleCooper.ogv"
                        type="video/ogg">
                </video>
                <div id="controls">
                    <button id="playpause" alt="play" title="playâ€
onclick="togglePlay()">play</button>
                </div>
            </section>
            <section id='start'>
                <script>window.onload = new_videoPlayer;</script>
            </section>

            <div id="controls">
                <button id="playpause" alt="play" title="play"
                    onclick="togglePlay()">play</button>
                <button id="stop" alt="stop" title="stop" onclick="stopVideo()">
                    stop </button>
            </div>

            <button id="rewind" alt="rewind" title="rewind"
                onclick="changePlaybackSpeed('-');">&laquo;</button>
            <button id="ffwd" alt="fast forward" title="fast forward"
                onclick="changePlaybackSpeed('+');">&raquo;</button>
            <button id="volumeDown" alt="decrease volume" title="-"
                onclick="changeVolume('-')">-</button>
            <button id="volumeUp" alt="increase volume" title="+"
                onclick="changeVolume('+')">+</button>

            <button id="mute" alt="mute" title="mute"
                onclick="toggleMute()">mute</button>

            <div id="controls">
                <div id="progressBar"><span id="played"></span></div>
            </div>
        </div>

        <script>
                function new_videoPlayer() {
                    video = document.getElementsByTagName("video")[0];
                    video.controls = false;
                    let ppbutton = document.getElementById("playpause");
                    video.addEventListener('play', function () {
                    ppbutton.title = "pause";
                    ppbutton.innerHTML = "pause";
                    }, false);
                    video.addEventListener('pause', function () {
                    ppbutton.title = "play";
                    ppbutton.innerHTML = "play";
                    }, false);
                    }
                    function togglePlay() {
                    if (video.paused || video.ended) {
                    if (video.ended) video.currentTime = 0;
                    video.play();
                    }
                    else {
                    video.pause();
                    }
                }

                video.addEventListener('ended', function() { this.pause(); }, false);
                function stopVideo() {
                    video.pause();
                    video.currentTime = 0;
                }

                function changePlaybackSpeed(direction) {
                    if (video.playbackRate != undefined) {
                    if (direction == "-") video.playbackRate -= 1;
                    else video.playbackRate += 1;
                    }
                    else {
                    if (direction == "-") video.currentTime -= 1;
                    else video.currentTime += 1;
                    }
                    }

                    function changeVolume(direction) {
let volume = Math.floor(video.volume * 10) / 10;
video.muted = false;
if (direction == "-") {
if (volume <= 0.1) video.volume = 0;
else video.volume -= 0.1;
}
else {
if (volume >= 0.9) video.volume = 1;
else video.volume += 0.1;
}
}

function toggleMute() {
let mute = document.getElementById("mute");
if (video.muted) {
mute.innerHTML = "mute";
video.muted = false;
}
else {
mute.innerHTML = "unmute";
video.muted = true;
}
}

video.addEventListener('timeupdate', function() {
 let value = 0;
 if (video.currentTime > 0) {
 value = Math.floor((100 / video.duration) * video.currentTime);
 }
 document.getElementById("played").style.width = value + "%";
}, false);


document.getElementById("progressBar").addEventListener("mouseup", function (e) {
let progressBar = document.getElementById("progressBar");
let value = (e.pageX - findPos(progressBar)).toFixed(2);
let timeToSet = ((video.duration / progressBar.offsetWidth)
.toFixed(2) * value).toFixed(2);
video.currentTime = timeToSet;
}, false);
function findPos(obj) {
let curleft = 0;
if (obj.offsetParent) {
do {
curleft += obj.offsetLeft;
obj = obj.offsetParent;
} while (obj);
}
return curleft;
}
            </script>

        <!-- CAMERA-->
        <h1>Simple web camera display demo</h1>
        <video id="video" width="640" height="480" autoplay></video>
        <script>
                window.addEventListener("DOMContentLoaded", WebCameraVideo, false);
                function WebCameraVideo() {
                const video = document.getElementById("video");
                const videoObj = { "video": true };
                const errBack = function (error) {
                console.log("Video capture error: ", error.code);
                };
                const getStream = function (stream) {
                video.srcObject = stream;
                video.play();
                };
                navigator.mediaDevices.getUserMedia(videoObj)
                .then(getStream)
                .catch(errBack);
                }
            </script>

        <!-- CANVAS 2D -->
        <div>
            <canvas id="myCanvas" width="400" height="300"> </canvas>
            <script>
                let f = document.getElementById("myCanvas");
                let ctx = f.getContext("2d");
                ctx.fillStyle="#FF0000";
                ctx.fillRect(0,0,150,75);
                ctx.moveTo(150,150);
                ctx.lineTo(250,250);
                ctx.stroke();
                ctx.arc(150,200,40,0,2*Math.PI);
                ctx.stroke();
                ctx.font="30px Arial";
                ctx.fillText("Hello World",200,50);
            </script>

            <script>
                let cc = document.getElementById("myCanvas");
                let ctx = cc.getContext("2d");
                ctx.save();
                ctx.translate(150,150);
                ctx.scale(2,1);
                ctx.fillStyle = "green";
                ctx.beginPath();
                ctx.arc(0, 0, 40, 0, 2*Math.PI,true);
                ctx.closePath();
                ctx.fill();
                ctx.restore();
            </script>

            <script>
                let c = document.getElementById("myCanvas");
                let ctx = c.getContext("2d");
                let im = new Image();
                im.onload = function () {
                ctx.drawImage(im, 100, 100, 100, 100);
                }
                im.src = "images/logo-smaller.jpg"
            </script>

            <script>
                let ccc = document.getElementById("myCanvas");
                let ctx = ccc.getContext("2d");
                function Heart(x, y, w, color) {
                let h = w * 0.7;
                let drx = w / 4;
                let ang = 0.25 * Math.PI;
                let leftctrx = x - drx;
                let rightctrx = x + drx;
                let cx = rightctrx + drx * Math.cos(ang);
                let cy = y + drx * Math.sin(ang);
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.arc(leftctrx, y, drx, 0, Math.PI - ang, true);
                ctx.lineTo(x, y + h);
                ctx.lineTo(cx, cy);
                ctx.arc(rightctrx, y, drx, ang, Math.PI, true);
                ctx.closePath();
                ctx.fill();
                }
                Heart(100, 100, 100, "pink");
            </script>

        </div>

        <!-- CANVAS 3D -->
        <div>
            <canvas id="myCanvas" width="400" height="300"> </canvas>
            <script>
                let d = document.getElementById("myCanvas");
                let ctx = d.getContext("3d");
                ctx.fillStyle="#FF0000";
                ctx.fillRect(0,0,0,150,75, 100);
                ctx.moveTo(150,150, 150);
                ctx.lineTo(250,250, 250);
                ctx.font="30px Arial";
                ctx.fillText("Hello World",200,50, 50);
            </script>
        </div>

    </body>

</html>